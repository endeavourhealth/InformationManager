<div class="modal-header">
  <h4 class="modal-title">Edit task concept</h4>
  <button type="button" class="close" (click)="close()" aria-hidden="true">&times;</button>
</div>
<loadingIndicator [done]="taskItem" text="Loading...">
  <div class="modal-body">
    <div class="container-fluid">
      <div class="row">
        <div class="form-group col-md-4">
          <label class="control-label">ID</label>
          <input class="form-control" [value]="concept?.data?.id" readonly>
        </div>
        <div class="form-group col-md-8">
          <label class="control-label">Name</label>
          <div class="input-group">
            <input class="form-control" [value]="concept?.data?.name" readonly>
            <div class="input-group-append">
              <span class="input-group-text" (click)="terms = concept?.data?.name"><span class="fa fa-fw fa-copy"></span></span>
            </div>
          </div>
        </div>
        <div class="form-group col-md-4">
          <label class="control-label">Equivalent to</label>
          <input class="form-control" [value]="equivalent" readonly>
        </div>
        <div class="form-group col-md-4">
          <label class="control-label">Related to</label>
          <input class="form-control" [value]="related" readonly>
        </div>
        <div class="form-group col-md-4">
          <label class="control-label">Replace with</label>
          <input class="form-control" [value]="replaced" readonly>
        </div>

        <div class="form-group col-md-12">
          <label class="control-label">Search</label>
          <div class="input-group">
            <input class="form-control" [(ngModel)]="terms" (keyup.enter)="search()" (keyup.space)="search()" aria-describedby="search-addon" #searchField>
            <div class="input-group-append">
              <span class="input-group-text" (click)="search()"><span class="fa fa-fw fa-search"></span></span>
            </div>
            <div class="input-group-append">
              <span class="input-group-text" (click)="analyse()"><span class="fa fa-fw fa-lightbulb-o"></span></span>
            </div>
            <div class="input-group-append">
              <span class="input-group-text" (click)="clear()"><span class="fa fa-fw fa-times"></span></span>
            </div>
          </div>
        </div>

        <div class="form-group col-md-12">
          <label class="control-label">Matches</label>
          <div class="scroll-box-300">
            <loadingIndicator [done]="analysis" [text]="loadingText">
              <table class="table table-sm table-striped table-hover">
                <thead>
                  <tr class="d-flex">
                    <th class="col-1">Method</th>
                    <th class="col-2">ID</th>
                    <th class="col-8">Name</th>
                    <th class="col-1"></th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let item of analysis" class="d-flex show-child-on-hover">
                    <td class="col-1">{{getMethodName(item.method)}}</td>
                    <td class="col-2">{{item.id}}</td>
                    <td class="col-8">{{item.name}}</td>
                    <td class="col-1">
                      <div class="dropdown" id="conceptDocument">
                        <button class="dropdown-toggle dropdown-toggle-custom btn-xs btn-success child-to-show btn-block text-left form-control" id="statusDropdown" type="button" data-toggle="dropdown">Set as...<i class="fa fa-caret-down pull-right" aria-hidden="true"></i></button>
                        <div class="dropdown-menu"  aria-labelledby="statusDropdown">
                          <button class="dropdown-item" (click)="setEquivalent(item)">Equivalent to</button>
                          <button class="dropdown-item" (click)="setEquivalent(item)">Refine...</button>
                          <button class="dropdown-item" (click)="setRelated(item)">Related to</button>
                          <button class="dropdown-item" (click)="setReplacement(item)">Replaced by</button>
                        </div>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </loadingIndicator>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-success" (click)="save(true)" name="cancel">Resolve</button>
    <button type="button" class="btn btn-warning" (click)="save()" name="cancel">Save</button>
    <button type="button" class="btn btn-danger" (click)="close()" name="cancel">Close</button>
  </div>
</loadingIndicator>
